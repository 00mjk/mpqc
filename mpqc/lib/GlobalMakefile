
# this is usually overridden
TARGET_TO_MAKE = $(shell basename `pwd`)

ifndef SRCDIR
  SRCDIR = .
endif

# this vpath works with listlibs to find the libraries
vpath %.a $(TOPDIR)/lib
vpath %.so $(TOPDIR)/lib

# SRCTOPDIR is the top of the source directory
SRCTOPDIR = $(shell $(SRCDIR)/$(TOPDIR)/bin/rmdotdot $(SRCDIR)/$(TOPDIR))

# LIBDIR is the full path to where the libraries are
LIBDIR = $(shell $(SRCTOPDIR)/bin/rmdotdot `pwd`/$(TOPDIR)/lib)

# SRCLIBDIR is the full path to the lib subdirectory of the source dir
SRCLIBDIR = $(SRCTOPDIR)/lib/

# THISDIR is the name of the current directory relative to TOPDIR/src/lib/
THISDIR = $(subst $(shell cd $(TOPDIR); pwd)/src/lib/,,$(shell pwd))

# first check for generated include files in the machine dependent directories
# and then for include files in the src directory
INCLUDE = -I$(TOPDIR)/src/lib -I$(SRCTOPDIR)/src/lib -I$(SRCTOPDIR)/include

include $(TOPDIR)/lib/LocalMakefile
