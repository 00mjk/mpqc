#!/usr/bin/perl

$method = "@F77_SYMBOLS@";

$in = shift;
$out = shift;

open(IN,"<$in");
open(OUT,">$out");

while(<IN>) {
    if (/\# *define F77_([A-Z]+)/) {
        $f77name = $1;
        if ($method eq "symbol_") {
            $cname = lc($f77name);
            $cname = "${cname}_";
        }
        elsif ($method eq "symbol") {
            $cname = lc($f77name);
        }
        elsif ($method eq "SYMBOL") {
            $cname = uc($f77name);
        }
        elsif ($method eq "SYMBOL_") {
            $cname = uc($f77name);
            $cname = "${cname}_";
        }
        printf OUT "#define F77_%s %s\n", $f77name, $cname;
    }
    else {
        printf OUT "%s", $_;
    }
}
