#!/bin/sh

sub='s_/[^/]*/\.\.\(/\)\?_\1_'
originalpath=$1
newpath=`echo $originalpath | sed "$sub"`

while [ $newpath != $originalpath ]; do
  originalpath=$newpath
  newpath=`echo $originalpath | sed "$sub"`
done

echo $newpath
